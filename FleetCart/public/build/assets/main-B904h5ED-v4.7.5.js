import{l as a}from"./lodash-CHiyWA8M-v4.7.5.js";import{S as n,N as h,P as u}from"./swiper-C8ZQRgZ4-v4.7.5.js";import"./CartItem-DoYV7sXc-v4.7.5.js";import"./@popperjs-B72wc7VP-v4.7.5.js";Alpine.store("cart",{cart:{items:{},availableShippingMethods:{},coupon:{},quantity:0,shippingCost:{},shippingMethodName:null,subTotal:{},taxes:[],total:[]},loading:!1,fetching:!1,fetched:!1,get items(){return this.cart.items},get quantity(){return this.fetched?Object.values(this.items).reduce((t,e)=>t+e.qty,0):FleetCart.cartQuantity},get isEmpty(){return Object.keys(this.cart.items).length===0},get shippingCost(){var t,e;return((e=(t=this.cart.shippingCost)==null?void 0:t.inCurrentCurrency)==null?void 0:e.amount)||0},get taxTotal(){return Object.values(this.cart.taxes).reduce((t,e)=>t+e.amount.inCurrentCurrency.amount,0)},get subTotal(){return Object.values(this.items).reduce((t,e)=>t+e.qty*e.unitPrice.inCurrentCurrency.amount,0)},get total(){return this.subTotal-this.couponValue+this.taxTotal+this.shippingCost},get hasCoupon(){return!!this.cart.coupon.code},get couponValue(){var t,e,i;return((i=(e=(t=this.cart.coupon)==null?void 0:t.value)==null?void 0:e.inCurrentCurrency)==null?void 0:i.amount)??0},init(){this.fetchingCart()},async fetchingCart(){try{this.fetching=!0;const{data:t}=await axios.get("/cart/get");this.cart=t}catch{}finally{this.fetching=!1,this.fetched=!0}},updateCart(t){this.cart={...t},this.setCoupon(t)},updateCartItemQty({id:t,qty:e}){this.cart.items[t].qty=e},removeCartItem(t){delete this.cart.items[t]},clearCart(){this.cart.items={}},setCoupon(t){t.coupon.code&&(this.cart.coupon=t.coupon)}});Alpine.store("wishlist",{wishlist:[],fetching:!0,get count(){return this.fetching?FleetCart.wishlistCount:this.wishlist.length},init(){this.fetchWishlist()},async fetchWishlist(){if(FleetCart.loggedIn){try{this.fetching=!0;const{data:t}=await axios.get("/account/wishlist/products/list");this.wishlist=t}catch{}finally{this.fetching=!1}return}this.fetching=!1},inWishlist(t){return this.wishlist.includes(t)},syncWishlist(t){if(this.inWishlist(t)){this.removeFromWishlist(t);return}this.addToWishlist(t)},async addToWishlist(t){if(FleetCart.loggedIn){this.wishlist.push(t),await axios.post("/account/wishlist/products",{productId:t});return}window.location.href="/login"},removeFromWishlist(t){this.wishlist.splice(this.wishlist.indexOf(t),1),axios.delete(`/account/wishlist/products/${t}`)}});Alpine.store("compare",{compareList:[],products:{},attributes:{},fetchingCompareList:!0,fetchedCompareProducts:!1,get isEmptyCompareList(){return this.compareList.length===0},get count(){return this.fetchingCompareList?FleetCart.compareCount:this.compareList.length},init(){this.fetchCompareList()},async fetchCompareProducts(){const{data:t}=await axios.get("/compare/products");this.fetchedCompareProducts=!0,this.products=t.products,this.attributes=t.attributes},async fetchCompareList(){try{this.fetchingCompareList=!0;const{data:t}=await axios.get("/compare/list");this.compareList=t}catch{}finally{this.fetchingCompareList=!1}},inCompareList(t){return this.compareList.includes(t)},async syncCompareList(t){if(this.inCompareList(t)){this.removeFromCompareList(t);return}this.addToCompareList(t)},addToCompareList(t){this.compareList.push(t),axios.post("/compare",{productId:t}).then(()=>{window.location.pathname.endsWith("/compare")&&this.fetchCompareProducts()})},async removeFromCompareList(t){delete this.products[t],this.compareList.splice(this.compareList.indexOf(t),1),await axios.delete(`compare/${t}`)}});Alpine.store("layout",{sidebarMenuOpen:!1,sidebarCartOpen:!1,sidebarFilterOpen:!1,localizationMenuOpen:!1,overlay:!1,get isOpenSidebarMenu(){return this.sidebarMenuOpen},get isOpenSidebarCart(){return this.sidebarCartOpen},get isOpenSidebarFilter(){return this.sidebarFilterOpen},get isOpenlocalizationMenu(){return this.localizationMenuOpen},openSidebarMenu(){this.sidebarMenuOpen=!0,this.showOverlay()},closeSidebarMenu(){this.sidebarMenuOpen=!1,this.hideOverlay()},openSidebarCart(t){if(t&&t.preventDefault(),window.location.pathname.endsWith("/checkout")){window.location.href="/cart";return}Alpine.store("cart").fetching||(this.sidebarCartOpen=!0,this.showOverlay())},closeSidebarCart(){this.sidebarCartOpen=!1,this.hideOverlay()},openSidebarFilter(){this.sidebarFilterOpen=!0,this.showOverlay()},closeSidebarFilter(){this.sidebarFilterOpen=!1,this.hideOverlay()},openLocalizationMenu(){this.localizationMenuOpen=!0,this.showOverlay()},closeLocalizationMenu(){this.localizationMenuOpen=!1,this.hideOverlay()},showOverlay(){this.overlay=!0},hideOverlay(){this.overlay=!1}});Alpine.data("HeaderSearch",({categories:t,initialQuery:e,initialCategory:i})=>({categories:t,initialQuery:e,initialCategory:i,skeleton:!0,showMiniSearch:!1,activeSuggestion:null,showSuggestions:!1,form:{query:e,category:i},suggestions:{categories:[],products:[],remaining:0},get shouldShowSuggestions(){return this.showSuggestions?this.hasAnySuggestion:!1},get moreResultsUrl(){return this.form.category?`/categories/${this.form.category}/products?query=${this.form.query}`:`/products?query=${this.form.query}`},get hasAnySuggestion(){return this.suggestions.products.length!==0},get hasAnyCategorySuggestion(){return this.suggestions.categories.length!==0},get allSuggestions(){return[...this.suggestions.categories,...this.suggestions.products]},get firstSuggestion(){return this.allSuggestions[0]},get lastSuggestion(){return this.allSuggestions[this.allSuggestions.length-1]},init(){this.hideSkeleton(),this.$watch("form.query",a.throttle(s=>{s===""?this.clearSuggestions():(this.showSuggestions=!0,this.fetchSuggestions())},600)),this.$watch("showMiniSearch",s=>{if(s){this.$refs.miniSearchInput.focus();return}this.hideSuggestions()}),this.fetchSuggestions()},hideSkeleton(){setTimeout(()=>{this.skeleton=!1},100)},getCategoryNameBySlug(s){var r;return((r=this.categories.find(o=>o.slug===s))==null?void 0:r.name)||""},changeCategory(s=""){this.form.category=s,this.fetchSuggestions()},async fetchSuggestions(){if(this.form.query==="")return;const{data:s}=await axios.get("/suggestions",{params:this.form});this.clearActiveSuggestion(),this.resetSuggestionScrollBar(),this.suggestions.categories=s.categories,this.suggestions.products=s.products,this.suggestions.remaining=s.remaining},search(){if(this.form.query){if(this.activeSuggestion){window.location.href=this.activeSuggestion.url,this.hideSuggestions();return}if(this.form.category){window.location.href=`/categories/${this.form.category}/products?query=${this.form.query}`;return}window.location.href=`/products?query=${this.form.query}`}},showExistingSuggestions(){this.showSuggestions=!0},clearSuggestions(){this.suggestions.categories=[],this.suggestions.products=[]},hideSuggestions(){this.showSuggestions=!1,this.clearActiveSuggestion()},isActiveSuggestion(s){return this.activeSuggestion?this.activeSuggestion.slug===s.slug:!1},changeActiveSuggestion(s){this.activeSuggestion=s},clearActiveSuggestion(){this.activeSuggestion=null},nextSuggestion(){this.hasAnySuggestion&&(this.activeSuggestion=this.allSuggestions[this.nextSuggestionIndex()],this.activeSuggestion||(this.activeSuggestion=this.firstSuggestion),this.adjustSuggestionScrollBar())},prevSuggestion(){if(this.hasAnySuggestion){if(this.prevSuggestionIndex()===-1){this.clearActiveSuggestion();return}this.activeSuggestion=this.allSuggestions[this.prevSuggestionIndex()],this.activeSuggestion||(this.activeSuggestion=this.lastSuggestion),this.adjustSuggestionScrollBar()}},nextSuggestionIndex(){return this.currentSuggestionIndex()+1},prevSuggestionIndex(){return this.currentSuggestionIndex()-1},currentSuggestionIndex(){return this.allSuggestions.indexOf(this.activeSuggestion)},adjustSuggestionScrollBar(){const s=document.querySelector(`.search-suggestions-inner li[data-slug='${this.activeSuggestion.slug}']`);s&&(this.$refs.searchSuggestionsInner.scrollTop=s.offsetTop-200)},resetSuggestionScrollBar(){this.$refs.searchSuggestionsInner!==void 0&&(this.$refs.searchSuggestionsInner.scrollTop=0)},hasBaseImage(s){return s.base_image.length!==0},baseImage(s){return this.hasBaseImage(s)?s.base_image.path:`${window.location.origin}/build/assets/image-placeholder.png`}}));Alpine.data("Header",()=>({stickyHeader:!1,showStickyHeader:!1,get isStickyHeader(){return this.stickyHeader},get isShowingStickyHeader(){return this.showStickyHeader},init(){this.toggleStickyHeader({delay:600}),this.addEventListeners()},toggleStickyHeader({delay:t}){const e=this.$refs.header;if(window.scrollY>e.offsetTop+e.offsetHeight){this.stickyHeader=!0,e.style.paddingTop=`${e.offsetHeight}px`,setTimeout(()=>{this.showStickyHeader=!0},t);return}this.stickyHeader=!1,this.showStickyHeader=!1,e.style.paddingTop="0px"},addEventListeners(){window.addEventListener("resize",()=>{this.toggleStickyHeader({delay:0})}),window.addEventListener("scroll",()=>{this.toggleStickyHeader({delay:0})})}}));Alpine.data("PrimaryMenu",()=>({init(){new n(".primary-menu",{modules:[h,u],slidesPerView:"auto",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}}));Alpine.data("SidebarCart",()=>({get cartIsEmpty(){return this.$store.cart.isEmpty},clearCart(){this.$store.cart.clearCart(),axios.delete("/cart/clear").then(({data:t})=>{this.$store.cart.updateCart(t)}).catch(t=>{notify(t.response.data.message)})}}));Alpine.data("CookieBar",()=>({show:!1,init(){setTimeout(()=>{this.show=!0},1e3)},decline(){this.show=!1,axios.delete("/storefront/cookie-bar")},accept(){this.show=!1,axios.delete("/storefront/cookie-bar")}}));Alpine.data("NewsletterSubscription",()=>({email:"",subscribing:!1,subscribed:!1,subscribe(){this.subscribing||this.subscribed||(this.subscribing=!0,document.activeElement.blur(),axios.post("/subscribers",{email:this.email}).then(()=>{this.email="",this.subscribed=!0}).catch(t=>{if(t.response.status===422){this.$refs.form.elements[0].focus(),notify(t.response.data.errors.email[0]);return}notify(t.response.data.message)}).finally(()=>{this.subscribing=!1}))}}));Alpine.data("NewsletterPopup",()=>({email:"",subscribing:!1,subscribed:!1,error:"",modal:bootstrap.Modal.getOrCreateInstance("#newsletterPopup"),init(){this.$watch("email",()=>{this.error=""}),this.showNewsletterPopup(),window.addEventListener("hide.bs.modal",()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})},showNewsletterPopup(){setTimeout(()=>{this.modal.show()},8e3)},disableNewsletterPopup(){this.modal.hide(),axios.delete("/storefront/newsletter-popup")},subscribe(){this.subscribing||this.subscribed||(this.subscribing=!0,document.activeElement.blur(),axios.post("/subscribers",{email:this.email}).then(()=>{this.email="",this.subscribed=!0}).catch(t=>{if(t.response.status===422){this.error=t.response.data.errors.email[0],this.$refs.form.elements[0].focus();return}this.error=t.response.data.message}).finally(()=>{this.subscribing=!1}))}}));Alpine.data("ScrollToTop",()=>({percent:0,scrolled:!1,get circumference(){return 19*2*Math.PI},init(){this.addEventListener()},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},addEventListener(){window.addEventListener("scroll",()=>{let t=document.body.scrollTop||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-document.documentElement.clientHeight;this.percent=Math.round(t/e*100),this.scrolled=window.scrollY>100})}}));
