import"./vue-CrVEoDC1-v4.7.5.js";import{t as g}from"./functions-1hbBtiMV-v4.7.5.js";import{_ as y,t as h}from"./_plugin-vue_export-helper-Cho5B_tF-v4.7.5.js";import{V as k}from"./VariationMixin-BmVW5XeT-v4.7.5.js";import{_ as C}from"./placeholder_image-Cy-98L1o-v4.7.5.js";import{A as i,G as o,z as n,aA as p,bf as a,bP as m,P as d,bE as v,bD as _,Q as $,bN as w,bS as V,b1 as E,aR as r,bQ as S,x as P}from"./@vue-BFN8Fv77-v4.7.5.js";import"./@popperjs-B72wc7VP-v4.7.5.js";import"./vue-toast-notification-CTrnZnlT-v4.7.5.js";import"./vuedraggable-BqKhINYl-v4.7.5.js";import"./Errors-CUe_UZOJ-v4.7.5.js";import"./@melloware-hpeTXfkd-v4.7.5.js";const T={mixins:[k],created(){this.form=this.prepareFormData(FleetCart.data.variation)},mounted(){this.initColorPicker()},methods:{prepareFormData(t){return t.uid=this.uid(),t.values.forEach(s=>{s.uid=this.uid(),s.image||(s.image={id:null,path:null})}),t},submit(){this.formSubmitting=!0,axios.put(`/variations/${this.form.id}`,this.transformData(this.form)).then(t=>{h(t.data.message,{type:"success"}),this.errors.reset()}).catch(({response:t})=>{h(t.data.message,{type:"default"}),this.errors.reset(),this.errors.record(t.data.errors),this.focusFirstErrorField(this.$refs.form.elements)}).finally(()=>{this.formSubmitting=!1})}}},U={class:"box-body"},F={class:"col-lg-2 col-sm-2"},N={class:"col-lg-7 col-sm-10"},R={class:"row"},A={class:"col-sm-6"},D={class:"form-group"},M={for:"name"},B=["textContent"],I={class:"col-sm-6"},K={class:"form-group"},z={for:"type"},Q={value:""},G={value:"text"},O={value:"color"},j={value:"image"},q=["textContent"],H={key:0,class:"row"},J={class:"col-lg-2 col-sm-2"},L={class:"col-lg-7 col-sm-10"},W={class:"variation-values clearfix"},X={class:"table-responsive"},Y={key:0},Z={key:1},x={class:"option-row"},tt=["name","id","onKeyup","onUpdate:modelValue"],ot=["textContent"],st={key:0},et=["name","id","onUpdate:modelValue"],at=["textContent"],it={key:1},rt={class:"d-flex"},nt=["onClick"],lt=["src"],dt={key:1,src:C,class:"placeholder-image",alt:"Placeholder Image"},mt=["textContent"],ut={class:"text-center"},pt=["onClick"],vt={class:"row"},ft={class:"col-lg-7 col-lg-offset-2 col-md-12 text-right"},ht=["disabled"];function ct(t,s,gt,yt,kt,f){const b=E("draggable");return r(),i("div",U,[o("form",{class:"form",onInput:s[5]||(s[5]=e=>t.errors.clear(e.target.name)),onSubmit:s[6]||(s[6]=V(()=>{},["prevent"])),ref:"form"},[o("div",{class:p(["row",{"has-variation-type":!t.isEmptyVariationType}])},[o("div",F,[o("h5",null,a(t.trans("variation::variations.group.general")),1)]),o("div",N,[o("div",R,[o("div",A,[o("div",D,[o("label",M,[d(a(t.trans("variation::attributes.name"))+" ",1),s[7]||(s[7]=o("span",{class:"text-red"},"*",-1))]),m(o("input",{type:"text",name:"name",id:"name",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>t.form.name=e)},null,512),[[v,t.form.name]]),t.errors.has("name")?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(t.errors.get("name"))},null,8,B)):n("",!0)])]),o("div",I,[o("div",K,[o("label",z,[d(a(t.trans("variation::attributes.type"))+" ",1),s[8]||(s[8]=o("span",{class:"text-red"},"*",-1))]),m(o("select",{name:"type",id:"type",class:"form-control custom-select-black",onChange:s[1]||(s[1]=e=>t.changeVariationType(e.target.value)),"onUpdate:modelValue":s[2]||(s[2]=e=>t.form.type=e)},[o("option",Q,a(t.trans("variation::variations.form.variation_types.please_select")),1),o("option",G,a(t.trans("variation::variations.form.variation_types.text")),1),o("option",O,a(t.trans("variation::variations.form.variation_types.color")),1),o("option",j,a(t.trans("variation::variations.form.variation_types.image")),1)],544),[[_,t.form.type]]),t.errors.has("type")?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(t.errors.get("type"))},null,8,q)):n("",!0)])])])])],2),t.isEmptyVariationType?n("",!0):(r(),i("div",H,[o("div",J,[o("h5",null,a(t.trans("variation::variations.group.values")),1)]),o("div",L,[o("div",W,[o("div",X,[o("table",{class:p(["options table table-bordered table-striped",t.form.type!==""?`type-${t.form.type}`:""])},[o("thead",null,[o("tr",null,[s[12]||(s[12]=o("th",null,null,-1)),o("th",null,[d(a(t.trans("variation::variations.form.label"))+" ",1),s[9]||(s[9]=o("span",{class:"text-red"},"*",-1))]),t.form.type==="color"?(r(),i("th",Y,[d(a(t.trans("variation::variations.form.color"))+" ",1),s[10]||(s[10]=o("span",{class:"text-red"},"*",-1))])):t.form.type==="image"?(r(),i("th",Z,[d(a(t.trans("variation::variations.form.image"))+" ",1),s[11]||(s[11]=o("span",{class:"text-red"},"*",-1))])):n("",!0),s[13]||(s[13]=o("th",null,null,-1))])]),$(b,{tag:"tbody",handle:".drag-handle","item-key":"uid",animation:"150",list:t.form.values,onEnd:t.updateColorThumbnails},{item:w(({element:e,index:u})=>[o("tr",x,[s[15]||(s[15]=o("td",{class:"text-center"},[o("span",{class:"drag-handle"},[o("i",{class:"fa"},"ï…‚"),o("i",{class:"fa"},"ï…‚")])],-1)),o("td",null,[m(o("input",{type:"text",name:`values.${e.uid}.label`,id:`values-${e.uid}-label`,class:"form-control",onKeyup:S(l=>t.addRowOnPressEnter(l,u),["enter"]),"onUpdate:modelValue":l=>e.label=l},null,40,tt),[[v,e.label]]),t.errors.has(`values.${e.uid}.label`)?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(t.errors.get(`values.${e.uid}.label`))},null,8,ot)):n("",!0)]),t.form.type==="color"?(r(),i("td",st,[o("div",null,[m(o("input",{type:"text",name:`values.${e.uid}.color`,id:`values-${e.uid}-color`,class:"form-control color-picker","onUpdate:modelValue":l=>e.color=l},null,8,et),[[v,e.color]])]),t.errors.has(`values.${e.uid}.color`)?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(t.errors.get(`values.${e.uid}.color`))},null,8,at)):n("",!0)])):t.form.type==="image"?(r(),i("td",it,[o("div",rt,[o("div",{class:"image-holder",onClick:l=>t.chooseImage(u,e.uid)},[e.image.id?(r(),i("img",{key:0,src:e.image.path,alt:"variation image"},null,8,lt)):(r(),i("img",dt))],8,nt)]),t.errors.has(`values.${e.uid}.image`)?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(t.errors.get(`values.${e.uid}.image`))},null,8,mt)):n("",!0)])):n("",!0),o("td",ut,[o("button",{type:"button",tabindex:"-1",class:"btn btn-default delete-row",onClick:l=>t.deleteRow(u,e.uid)},s[14]||(s[14]=[o("i",{class:"fa fa-trash"},null,-1)]),8,pt)])])]),_:1},8,["list","onEnd"])],2)]),o("button",{type:"button",class:"btn btn-default",onClick:s[3]||(s[3]=(...e)=>t.addRow&&t.addRow(...e))},a(t.trans("variation::variations.form.add_row")),1)])])])),o("div",vt,[o("div",ft,[o("button",{type:"button",class:p(["btn btn-primary",{"btn-loading":t.formSubmitting}]),disabled:t.formSubmitting,onClick:s[4]||(s[4]=(...e)=>f.submit&&f.submit(...e))},a(t.trans("admin::admin.buttons.save")),11,ht)])])],544)])}const bt=y(T,[["render",ct]]),c=P(bt);c.config.globalProperties.trans=g;c.mount("#app");
