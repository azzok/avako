import"./vue-CrVEoDC1-v4.7.5.js";import{t as g}from"./functions-1hbBtiMV-v4.7.5.js";import{_ as y,t as c}from"./_plugin-vue_export-helper-Cho5B_tF-v4.7.5.js";import{V as k}from"./VariationMixin-BmVW5XeT-v4.7.5.js";import{_}from"./placeholder_image-Cy-98L1o-v4.7.5.js";import{b1 as C,A as i,aR as r,G as t,z as n,aA as p,bf as a,bP as u,P as d,bE as v,bD as w,Q as V,bN as D,bQ as E,bS as S,x as F}from"./@vue-BFN8Fv77-v4.7.5.js";import"./@popperjs-B72wc7VP-v4.7.5.js";import"./vue-toast-notification-CTrnZnlT-v4.7.5.js";import"./vuedraggable-BqKhINYl-v4.7.5.js";import"./Errors-CUe_UZOJ-v4.7.5.js";import"./@melloware-hpeTXfkd-v4.7.5.js";const T={mixins:[k],created(){this.setFormDefaultData()},mounted(){this.focusInitialField()},methods:{setFormDefaultData(){this.form={uid:this.uid(),type:"",values:[{uid:this.uid(),image:{id:null,path:null}}]}},focusInitialField(){this.$nextTick(()=>{$("#name").trigger("focus")})},submit(){this.formSubmitting=!0,axios.post("/variations",this.transformData(this.form)).then(s=>{c(s.data.message,{type:"success"}),this.resetForm(),this.errors.reset()}).catch(({response:s})=>{c(s.data.message,{type:"default"}),this.errors.reset(),this.errors.record(s.data.errors),this.focusFirstErrorField(this.$refs.form.elements)}).finally(()=>{this.formSubmitting=!1})}}},U={class:"box-body"},I={class:"col-lg-2 col-sm-2"},N={class:"col-lg-7 col-sm-10"},P={class:"row"},R={class:"col-sm-6"},A={class:"form-group"},M={for:"name"},B=["textContent"],K={class:"col-sm-6"},z={class:"form-group"},Q={for:"type"},G={value:""},O={value:"text"},j={value:"color"},q={value:"image"},H=["textContent"],J={key:0,class:"row"},L={class:"col-lg-2 col-sm-2"},W={class:"col-lg-7 col-sm-10"},X={class:"variation-values clearfix"},Y={class:"table-responsive"},Z={key:0},x={key:1},tt={class:"option-row"},st=["name","id","onKeyup","onUpdate:modelValue"],ot=["textContent"],et={key:0},at=["name","id","onUpdate:modelValue"],it=["textContent"],rt={key:1},nt={class:"d-flex"},lt=["onClick"],dt=["src"],ut={key:1,src:_,class:"placeholder-image",alt:"Placeholder Image"},mt=["textContent"],pt={class:"text-center"},vt=["onClick"],ft={class:"row"},ct={class:"col-lg-7 col-lg-offset-2 col-md-12 text-right"},ht=["disabled"];function bt(s,o,yt,kt,_t,f){const b=C("draggable");return r(),i("div",U,[t("form",{class:"form",onInput:o[5]||(o[5]=e=>s.errors.clear(e.target.name)),onSubmit:o[6]||(o[6]=S(()=>{},["prevent"])),ref:"form"},[t("div",{class:p(["row",{"has-variation-type":!s.isEmptyVariationType}])},[t("div",I,[t("h5",null,a(s.trans("variation::variations.group.general")),1)]),t("div",N,[t("div",P,[t("div",R,[t("div",A,[t("label",M,[d(a(s.trans("variation::attributes.name"))+" ",1),o[7]||(o[7]=t("span",{class:"text-red"},"*",-1))]),u(t("input",{type:"text",name:"name",id:"name",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=e=>s.form.name=e)},null,512),[[v,s.form.name]]),s.errors.has("name")?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(s.errors.get("name"))},null,8,B)):n("",!0)])]),t("div",K,[t("div",z,[t("label",Q,[d(a(s.trans("variation::attributes.type"))+" ",1),o[8]||(o[8]=t("span",{class:"text-red"},"*",-1))]),u(t("select",{name:"type",id:"type",class:"form-control custom-select-black",onChange:o[1]||(o[1]=e=>s.changeVariationType(e.target.value)),"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.type=e)},[t("option",G,a(s.trans("variation::variations.form.variation_types.please_select")),1),t("option",O,a(s.trans("variation::variations.form.variation_types.text")),1),t("option",j,a(s.trans("variation::variations.form.variation_types.color")),1),t("option",q,a(s.trans("variation::variations.form.variation_types.image")),1)],544),[[w,s.form.type]]),s.errors.has("type")?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(s.errors.get("type"))},null,8,H)):n("",!0)])])])])],2),s.isEmptyVariationType?n("",!0):(r(),i("div",J,[t("div",L,[t("h5",null,a(s.trans("variation::variations.group.values")),1)]),t("div",W,[t("div",X,[t("div",Y,[t("table",{class:p(["options table table-bordered table-striped",s.form.type!==""?`type-${s.form.type}`:""])},[t("thead",null,[t("tr",null,[o[12]||(o[12]=t("th",null,null,-1)),t("th",null,[d(a(s.trans("variation::variations.form.label"))+" ",1),o[9]||(o[9]=t("span",{class:"text-red"},"*",-1))]),s.form.type==="color"?(r(),i("th",Z,[d(a(s.trans("variation::variations.form.color"))+" ",1),o[10]||(o[10]=t("span",{class:"text-red"},"*",-1))])):s.form.type==="image"?(r(),i("th",x,[d(a(s.trans("variation::variations.form.image"))+" ",1),o[11]||(o[11]=t("span",{class:"text-red"},"*",-1))])):n("",!0),o[13]||(o[13]=t("th",null,null,-1))])]),V(b,{tag:"tbody",handle:".drag-handle","item-key":"uid",animation:"150",list:s.form.values,onEnd:s.updateColorThumbnails},{item:D(({element:e,index:m})=>[t("tr",tt,[o[15]||(o[15]=t("td",{class:"text-center"},[t("span",{class:"drag-handle"},[t("i",{class:"fa"},"ï…‚"),t("i",{class:"fa"},"ï…‚")])],-1)),t("td",null,[u(t("input",{type:"text",name:`values.${e.uid}.label`,id:`values-${e.uid}-label`,class:"form-control",onKeyup:E(l=>s.addRowOnPressEnter(l,m),["enter"]),"onUpdate:modelValue":l=>e.label=l},null,40,st),[[v,e.label]]),s.errors.has(`values.${e.uid}.label`)?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(s.errors.get(`values.${e.uid}.label`))},null,8,ot)):n("",!0)]),s.form.type==="color"?(r(),i("td",et,[t("div",null,[u(t("input",{type:"text",name:`values.${e.uid}.color`,id:`values-${e.uid}-color`,class:"form-control color-picker","onUpdate:modelValue":l=>e.color=l},null,8,at),[[v,e.color]])]),s.errors.has(`values.${e.uid}.color`)?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(s.errors.get(`values.${e.uid}.color`))},null,8,it)):n("",!0)])):s.form.type==="image"?(r(),i("td",rt,[t("div",nt,[t("div",{class:"image-holder",onClick:l=>s.chooseImage(m,e.uid)},[e.image.id?(r(),i("img",{key:0,src:e.image.path,alt:"variation image"},null,8,dt)):(r(),i("img",ut))],8,lt)]),s.errors.has(`values.${e.uid}.image`)?(r(),i("span",{key:0,class:"help-block text-red",textContent:a(s.errors.get(`values.${e.uid}.image`))},null,8,mt)):n("",!0)])):n("",!0),t("td",pt,[t("button",{type:"button",tabindex:"-1",class:"btn btn-default delete-row",onClick:l=>s.deleteRow(m,e.uid)},o[14]||(o[14]=[t("i",{class:"fa fa-trash"},null,-1)]),8,vt)])])]),_:1},8,["list","onEnd"])],2)]),t("button",{type:"button",class:"btn btn-default",onClick:o[3]||(o[3]=(...e)=>s.addRow&&s.addRow(...e))},a(s.trans("variation::variations.form.add_row")),1)])])])),t("div",ft,[t("div",ct,[t("button",{type:"button",class:p(["btn btn-primary",{"btn-loading":s.formSubmitting}]),disabled:s.formSubmitting,onClick:o[4]||(o[4]=(...e)=>f.submit&&f.submit(...e))},a(s.trans("admin::admin.buttons.save")),11,ht)])])],544)])}const gt=y(T,[["render",bt]]),h=F(gt);h.config.globalProperties.trans=g;h.mount("#app");
